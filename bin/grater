#!/usr/bin/env ruby

# require "bundler/setup"
# Bundler.require(:default)
require 'dmenu'
require 'slop'

require_relative "../lib/grater"


options = Slop.parse do |o|
  o.bool "-v", "--verbose", "enable verbose mode", default: false
end


command = options.arguments.first

if command
  # TODO: DSL this
  case command
  when 'edit'
    Grater::Window.summon_or_run(/emacs.Emacs/,'emacs &')

  when 'browse'
    w = Grater::Window.summon_or_run(/google-chrome.google-chrome/,'slack &')

  when 'chat'
    w = Grater::Window.summon_or_run(/slack.Slack/,'slack &')

  when 'terminal'
    w = Grater::Window.summon_or_run(/gnome-terminal-server.Gnome-terminal/,'gnome-terminal')    

  when 'home'
    Grater::Window.summon_or_run(/desktop_window.Nautilus/,'nautilus')
  else
    puts "Unknown command #{command}"
  end
else
  puts 'Command missing.'
end





